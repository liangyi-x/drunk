{"id":"55877","variant":"standard","title":"广播页面豆瓣风格整合"}
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LOST & FOUND</title>
<style>
  body {
    margin:0; padding:0;
    background-color:#2f2f2f;
    font-family:"Noto Sans", sans-serif;
    color:#ddd;
    overflow-x:hidden;
  }

  /* 页面标题 */
  .page-title {
    text-align: center;
    font-size: 2rem;
    font-weight: 600;
    color: #fff;
    margin: 2rem 0 1rem 0;
  }

  /* 广播列表卡片化 */
  .broadcast-list {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    z-index:1;
    position: relative;
  }
  .broadcast-card {
    background: #3a3a3a;
    border-radius: 8px;
    padding: 0.8rem 1rem;
    box-shadow: 0 1px 4px rgba(0,0,0,0.4);
    word-break: break-word;
    border-left: 4px solid #888;
    display:flex; flex-direction:column;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .broadcast-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  }
  .broadcast-message { margin-bottom:0.4rem; font-size:1rem; }
  .broadcast-time { font-size:0.8rem; color:#aaa; text-align:right; }

  /* 输入框 */
  .broadcast-input-wrapper {
    max-width: 800px;
    margin: 1.5rem auto 2rem auto;
    display:flex; gap:0.5rem;
    position: relative;
    z-index:1;
  }
  #broadcast-input {
    flex:1;
    padding:0.5rem 0.6rem;
    border-radius:8px;
    border:none;
    font-size:1rem;
    background:#4a4a4a;
    color:#fff;
  }
  #broadcast-send {
    padding:0.5rem 0.8rem;
    border:none;
    border-radius:8px;
    background:#666;
    color:#fff;
    cursor:pointer;
    font-weight:500;
  }
  #broadcast-send:hover { background:#888; }

  /* LOST & FOUND */
  #lostfound {
    text-align:center;
    font-style:italic;
    font-size:1.5rem;
    color: rgba(220,220,220,0.7);
    text-shadow:0 0 6px rgba(255,255,255,0.05);
    margin:2rem 0;
    cursor:pointer;
    z-index:1;
    position: relative;
  }

  /* 溶解动画 */
  @keyframes dissolve {
    0% { opacity:1; filter:blur(0px); transform: scale(1); }
    100% { opacity:0; filter:blur(12px); transform: scale(0.3) rotate(10deg); }
  }
  .dissolve { animation: dissolve 1.2s ease forwards; }

  /* 水墨烟雾背景 */
  #smoke-canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index:0;
  }
</style>
</head>
<body>
<canvas id="smoke-canvas"></canvas>

<div class="page-title">LOST & FOUND</div>

<div class="broadcast-input-wrapper">
  <input type="text" id="broadcast-input" placeholder="输入广播信息">
  <button id="broadcast-send">发送</button>
</div>

<div class="broadcast-list" id="broadcasts">
  <!-- 广播内容通过 Firebase JS 注入 -->
</div>

<div id="lostfound">LOST & FOUND 像水消失在水中</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCcerqGJVSsMwLs7eoRjATE8X7bplWsD54",
  authDomain: "drunk-broadcast.firebaseapp.com",
  projectId: "drunk-broadcast",
  storageBucket: "drunk-broadcast.firebasestorage.app",
  messagingSenderId: "998143016108",
  appId: "1:998143016108:web:87c3a60b853aaf75f27309"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const broadcastRef = collection(db, "broadcasts");
const inputEl = document.getElementById("broadcast-input");
const sendBtn = document.getElementById("broadcast-send");
const listEl = document.getElementById("broadcasts");

// 发送广播
sendBtn.addEventListener("click", async ()=>{
  const text=inputEl.value.trim();
  if(!text) return;
  try{
    await addDoc(broadcastRef,{message:text,timestamp:new Date()});
    inputEl.value="";
  }catch(e){console.error("发送失败:",e);}
});
inputEl.addEventListener("keydown",e=>{if(e.key==="Enter")sendBtn.click();});

// 实时监听
const q=query(broadcastRef,orderBy("timestamp","desc"));
onSnapshot(q,snapshot=>{
  listEl.innerHTML="";
  snapshot.forEach(doc=>{
    const div=document.createElement("div");
    div.className="broadcast-card";
    div.innerHTML=`<div class="broadcast-message">${doc.data().message}</div>
                   <div class="broadcast-time">${new Date(doc.data().timestamp.toDate()).toLocaleString()}</div>`;
    listEl.appendChild(div);
  });
},error=>{console.error("监听失败:",error); listEl.textContent="加载失败";});

// LOST & FOUND 点击溶解
document.getElementById("lostfound").addEventListener("click", function () {
  const el = this;
  el.classList.add("dissolve");
  setTimeout(() => { window.location.href = "/drunk/"; }, 1200);
});
</script>

<!-- 水墨烟雾 JS -->
<script>
const canvas = document.getElementById("smoke-canvas");
const ctx = canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
const particles=[];
for(let i=0;i<80;i++){
  particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*40+20, alpha:Math.random()*0.2+0.05, vx:Math.random()*0.2-0.1, vy:Math.random()*0.2-0.1});
}
function animateSmoke(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.fillStyle=`rgba(200,200,200,${p.alpha})`;
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
    p.x+=p.vx; p.y+=p.vy;
    if(p.x>canvas.width) p.x=0;
    if(p.x<0) p.x=canvas.width;
    if(p.y>canvas.height) p.y=0;
    if(p.y<0) p.y=canvas.height;
  });
  requestAnimationFrame(animateSmoke);
}
animateSmoke();
window.addEventListener("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});
</script>
</body>
</html>
