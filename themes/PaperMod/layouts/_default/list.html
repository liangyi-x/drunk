{{ define "main" }}
  {{ partial "breadcrumbs.html" . }}

  <main class="main-content">
    {{- $paginator := .Paginate (where .Pages "Section" "posts") }}
    {{- range $paginator.Pages }}
    <article class="post-entry">
      {{- $isHidden := (.Param "cover.hiddenInList") | default (.Param "cover.hidden") | default false }}
      {{ partial "cover.html" (dict "cxt" . "IsHome" false "isHidden" $isHidden) }}

      <header class="entry-header">
        <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
      </header>

      <div class="entry-content">
        {{- /* 优先用 summary，如果没有 summary，则取正文第一行 */ -}}
        {{- if .Params.summary }}
          <p>{{ .Params.summary }}</p>
        {{- else }}
          {{- $firstLine := index (split (.Plain) "\n") 0 }}
          <p>{{ $firstLine }}</p>
        {{- end }}
      </div>

      <footer class="entry-footer">
        {{ partial "post_meta.html" . }}
        <a class="entry-link" href="{{ .Permalink }}">Read more</a>
      </footer>
    </article>
    {{- end }}

    {{ partial "pagination.html" . }}
  </main>
{{ end }}


{{- end }}{{/* end profileMode */}}

{{- end }}{{- /* end main */ -}}
