<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLIMBING WALL</title>
<style>
  body {
    margin: 0;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: sans-serif;
    user-select: none;
  }

  .climbing-wall {
    position: relative;
    width: 600px;
    height: 800px;
    background: linear-gradient(#222, #555);
    border: 5px solid #444;
    border-radius: 15px;
    overflow: hidden;
  }

  .hold {
    position: absolute;
    cursor: pointer;
    animation: float 3s ease-in-out infinite alternate;
    box-shadow: 0 0 10px rgba(255,255,255,0.5);
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .hold:hover {
    transform: scale(1.3) rotate(5deg);
    box-shadow: 0 0 20px rgba(255,255,255,0.8);
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    100% { transform: translateY(-10px); }
  }

  .hold.red { background: #e74c3c; width: 40px; height: 40px; border-radius: 50%; }
  .hold.blue { background: #3498db; width: 35px; height: 35px; border-radius: 50% / 40%; }
  .hold.green { background: #2ecc71; width: 30px; height: 30px; border-radius: 60% 40% 50% 50%; }
  .hold.purple { background: #9b59b6; width: 45px; height: 45px; border-radius: 50% / 60%; }

  canvas {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
  }

  .tooltip {
    position: absolute;
    padding: 5px 10px;
    background: rgba(255,255,255,0.9);
    color: #111;
    border-radius: 5px;
    font-size: 14px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .home-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 32px;
    cursor: pointer;
    z-index: 10;
    transition: transform 0.3s;
  }

  .home-btn:hover {
    transform: scale(1.2) rotate(-10deg);
  }
</style>
</head>
<body>

<div class="climbing-wall" id="wall">
  <canvas id="lines" width="600" height="800"></canvas>

  <div class="hold red" style="top: 50px; left: 50px;" data-name="Á∫øË∑ØA"></div>
  <div class="hold blue" style="top: 150px; left: 200px;" data-name="Á∫øË∑ØB"></div>
  <div class="hold green" style="top: 300px; left: 100px;" data-name="Á∫øË∑ØC"></div>
  <div class="hold purple" style="top: 400px; left: 300px;" data-name="Á∫øË∑ØD"></div>
  <div class="hold red" style="top: 550px; left: 250px;" data-name="Á∫øË∑ØE"></div>

  <div class="home-btn" onclick="goHome()">ü™º</div>
</div>

<div class="tooltip" id="tooltip"></div>

<script>
const wall = document.getElementById('wall');
const tooltip = document.getElementById('tooltip');
const canvas = document.getElementById('lines');
const ctx = canvas.getContext('2d');

let holds = Array.from(document.querySelectorAll('.hold')).filter(h => !h.classList.contains('home-btn'));
let lines = []; // Â≠òÂÇ®ËøûÁ∫ø

let dragging = null;

// ÁªòÂà∂ÊâÄÊúâÁ∫øË∑Ø
function drawLines() {
  ctx.clearRect(0,0,canvas.width, canvas.height);
  ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
  ctx.lineWidth = 3;
  ctx.beginPath();
  lines.forEach(l => {
    const r1 = l.from.getBoundingClientRect();
    const r2 = l.to.getBoundingClientRect();
    const wallRect = wall.getBoundingClientRect();
    const x1 = r1.left - wallRect.left + r1.width/2;
    const y1 = r1.top - wallRect.top + r1.height/2;
    const x2 = r2.left - wallRect.left + r2.width/2;
    const y2 = r2.top - wallRect.top + r2.height/2;
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
  });
  ctx.stroke();
}

// ÂàùÂßãÂåñÈº†Ê†á‰∫ã‰ª∂
holds.forEach(hold => {
  hold.addEventListener('mouseenter', e => {
    tooltip.style.opacity = 1;
    tooltip.innerText = hold.dataset.name;
  });
  hold.addEventListener('mousemove', e => {
    tooltip.style.left = e.pageX + 10 + 'px';
    tooltip.style.top = e.pageY + 10 + 'px';
  });
  hold.addEventListener('mouseleave', e => {
    tooltip.style.opacity = 0;
  });

  hold.addEventListener('click', () => {
    if(dragging) return;
    if(!dragging) {
      dragging = hold;
    } else if(dragging !== hold) {
      lines.push({from: dragging, to: hold});
      dragging = null;
      drawLines();
    }
  });
});

// Âõû‰∏ªÈ°µÂáΩÊï∞
function goHome(){
  window.location.href="https://liangyi-x.github.io/drunk/";
}

// ÂàùÂßãÁªòÂà∂
drawLines();
</script>

</body>
</html>

